[{"path":"https://darwin-eu.github.io/CohortSurvival/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"Apache License","title":"Apache License","text":"Version 2.0, January 2004 <http://www.apache.org/licenses/>","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/CohortSurvival/LICENSE.html","id":"id_1-definitions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"1. Definitions","title":"Apache License","text":"“License” shall mean terms conditions use, reproduction, distribution defined Sections 1 9 document. “Licensor” shall mean copyright owner entity authorized copyright owner granting License. “Legal Entity” shall mean union acting entity entities control, controlled , common control entity. purposes definition, “control” means () power, direct indirect, cause direction management entity, whether contract otherwise, (ii) ownership fifty percent (50%) outstanding shares, (iii) beneficial ownership entity. “” (“”) shall mean individual Legal Entity exercising permissions granted License. “Source” form shall mean preferred form making modifications, including limited software source code, documentation source, configuration files. “Object” form shall mean form resulting mechanical transformation translation Source form, including limited compiled object code, generated documentation, conversions media types. “Work” shall mean work authorship, whether Source Object form, made available License, indicated copyright notice included attached work (example provided Appendix ). “Derivative Works” shall mean work, whether Source Object form, based (derived ) Work editorial revisions, annotations, elaborations, modifications represent, whole, original work authorship. purposes License, Derivative Works shall include works remain separable , merely link (bind name) interfaces , Work Derivative Works thereof. “Contribution” shall mean work authorship, including original version Work modifications additions Work Derivative Works thereof, intentionally submitted Licensor inclusion Work copyright owner individual Legal Entity authorized submit behalf copyright owner. purposes definition, “submitted” means form electronic, verbal, written communication sent Licensor representatives, including limited communication electronic mailing lists, source code control systems, issue tracking systems managed , behalf , Licensor purpose discussing improving Work, excluding communication conspicuously marked otherwise designated writing copyright owner “Contribution.” “Contributor” shall mean Licensor individual Legal Entity behalf Contribution received Licensor subsequently incorporated within Work.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/LICENSE.html","id":"id_2-grant-of-copyright-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"2. Grant of Copyright License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable copyright license reproduce, prepare Derivative Works , publicly display, publicly perform, sublicense, distribute Work Derivative Works Source Object form.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/LICENSE.html","id":"id_3-grant-of-patent-license","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"3. Grant of Patent License","title":"Apache License","text":"Subject terms conditions License, Contributor hereby grants perpetual, worldwide, non-exclusive, -charge, royalty-free, irrevocable (except stated section) patent license make, made, use, offer sell, sell, import, otherwise transfer Work, license applies patent claims licensable Contributor necessarily infringed Contribution(s) alone combination Contribution(s) Work Contribution(s) submitted. institute patent litigation entity (including cross-claim counterclaim lawsuit) alleging Work Contribution incorporated within Work constitutes direct contributory patent infringement, patent licenses granted License Work shall terminate date litigation filed.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/LICENSE.html","id":"id_4-redistribution","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"4. Redistribution","title":"Apache License","text":"may reproduce distribute copies Work Derivative Works thereof medium, without modifications, Source Object form, provided meet following conditions: () must give recipients Work Derivative Works copy License; (b) must cause modified files carry prominent notices stating changed files; (c) must retain, Source form Derivative Works distribute, copyright, patent, trademark, attribution notices Source form Work, excluding notices pertain part Derivative Works; (d) Work includes “NOTICE” text file part distribution, Derivative Works distribute must include readable copy attribution notices contained within NOTICE file, excluding notices pertain part Derivative Works, least one following places: within NOTICE text file distributed part Derivative Works; within Source form documentation, provided along Derivative Works; , within display generated Derivative Works, wherever third-party notices normally appear. contents NOTICE file informational purposes modify License. may add attribution notices within Derivative Works distribute, alongside addendum NOTICE text Work, provided additional attribution notices construed modifying License. may add copyright statement modifications may provide additional different license terms conditions use, reproduction, distribution modifications, Derivative Works whole, provided use, reproduction, distribution Work otherwise complies conditions stated License.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/LICENSE.html","id":"id_5-submission-of-contributions","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"5. Submission of Contributions","title":"Apache License","text":"Unless explicitly state otherwise, Contribution intentionally submitted inclusion Work Licensor shall terms conditions License, without additional terms conditions. Notwithstanding , nothing herein shall supersede modify terms separate license agreement may executed Licensor regarding Contributions.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/LICENSE.html","id":"id_6-trademarks","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"6. Trademarks","title":"Apache License","text":"License grant permission use trade names, trademarks, service marks, product names Licensor, except required reasonable customary use describing origin Work reproducing content NOTICE file.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/LICENSE.html","id":"id_7-disclaimer-of-warranty","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"7. Disclaimer of Warranty","title":"Apache License","text":"Unless required applicable law agreed writing, Licensor provides Work (Contributor provides Contributions) “” BASIS, WITHOUT WARRANTIES CONDITIONS KIND, either express implied, including, without limitation, warranties conditions TITLE, NON-INFRINGEMENT, MERCHANTABILITY, FITNESS PARTICULAR PURPOSE. solely responsible determining appropriateness using redistributing Work assume risks associated exercise permissions License.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/LICENSE.html","id":"id_8-limitation-of-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"8. Limitation of Liability","title":"Apache License","text":"event legal theory, whether tort (including negligence), contract, otherwise, unless required applicable law (deliberate grossly negligent acts) agreed writing, shall Contributor liable damages, including direct, indirect, special, incidental, consequential damages character arising result License use inability use Work (including limited damages loss goodwill, work stoppage, computer failure malfunction, commercial damages losses), even Contributor advised possibility damages.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/LICENSE.html","id":"id_9-accepting-warranty-or-additional-liability","dir":"","previous_headings":"Terms and Conditions for use, reproduction, and distribution","what":"9. Accepting Warranty or Additional Liability","title":"Apache License","text":"redistributing Work Derivative Works thereof, may choose offer, charge fee , acceptance support, warranty, indemnity, liability obligations /rights consistent License. However, accepting obligations, may act behalf sole responsibility, behalf Contributor, agree indemnify, defend, hold Contributor harmless liability incurred , claims asserted , Contributor reason accepting warranty additional liability. END TERMS CONDITIONS","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/LICENSE.html","id":"appendix-how-to-apply-the-apache-license-to-your-work","dir":"","previous_headings":"","what":"APPENDIX: How to apply the Apache License to your work","title":"Apache License","text":"apply Apache License work, attach following boilerplate notice, fields enclosed brackets [] replaced identifying information. (Don’t include brackets!) text enclosed appropriate comment syntax file format. also recommend file class name description purpose included “printed page” copyright notice easier identification within third-party archives.","code":"Copyright [yyyy] [name of copyright owner]  Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0  Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License."},{"path":"https://darwin-eu.github.io/CohortSurvival/articles/a01_Single_event_of_interest.html","id":"set-up","dir":"Articles","previous_headings":"","what":"Set up","title":"Single outcome event of interest","text":"Let’s first load packages required. ’ll create cdm reference use example MGUS2 survival dataset. practice use CDMConnector package connect data mapped OMOP CDM. vignette ’ll first estimate survival following diagnosis MGUS, death outcome interest. typically need define study cohorts , case example data already cohorts available. can see diagnosis cohort also number additional features recorded individuals ’ll use stratification.","code":"library(CDMConnector) library(CohortSurvival) library(dplyr) library(ggplot2) cdm <- CohortSurvival::mockMGUS2cdm() cdm$mgus_diagnosis %>%    glimpse() #> Rows: ?? #> Columns: 10 #> Database: DuckDB 0.8.1 [unknown@Linux 5.15.0-1041-azure:R 4.3.1/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15… #> $ cohort_start_date    <date> 1981-01-01, 1968-01-01, 1980-01-01, 1977-01-01, … #> $ cohort_end_date      <date> 1981-01-01, 1968-01-01, 1980-01-01, 1977-01-01, … #> $ age                  <dbl> 88, 78, 94, 68, 90, 90, 89, 87, 86, 79, 86, 89, 8… #> $ sex                  <fct> F, F, M, M, F, M, F, F, F, F, M, F, M, F, M, F, F… #> $ hgb                  <dbl> 13.1, 11.5, 10.5, 15.2, 10.7, 12.9, 10.5, 12.3, 1… #> $ creat                <dbl> 1.30, 1.20, 1.50, 1.20, 0.80, 1.00, 0.90, 1.20, 0… #> $ mspike               <dbl> 0.5, 2.0, 2.6, 1.2, 1.0, 0.5, 1.3, 1.6, 2.4, 2.3,… #> $ age_group            <chr> \">=70\", \">=70\", \">=70\", \"<70\", \">=70\", \">=70\", \">…  cdm$death_cohort %>%    glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.8.1 [unknown@Linux 5.15.0-1041-azure:R 4.3.1/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13, 14, 15, 1… #> $ cohort_start_date    <date> 1981-01-31, 1968-01-26, 1980-02-16, 1977-04-03, … #> $ cohort_end_date      <date> 1981-01-31, 1968-01-26, 1980-02-16, 1977-04-03, …"},{"path":"https://darwin-eu.github.io/CohortSurvival/articles/a01_Single_event_of_interest.html","id":"overall-survival","dir":"Articles","previous_headings":"","what":"Overall survival","title":"Single outcome event of interest","text":"First, can estimate survival cohort overall like . can see results outputted long format. can plot results like .  returned results also attributes containing information summarises survival.","code":"MGUS_death <- estimateSingleEventSurvival(cdm,   targetCohortTable = \"mgus_diagnosis\",   outcomeCohortTable = \"death_cohort\" ) MGUS_death %>%    glimpse() #> Rows: 3,915 #> Columns: 14 #> $ cdm_name       <chr> \"mock\", \"mock\", \"mock\", \"mock\", \"mock\", \"mock\", \"mock\",… #> $ result_type    <chr> \"Survival estimate\", \"Survival estimate\", \"Survival est… #> $ group_name     <chr> \"Cohort\", \"Cohort\", \"Cohort\", \"Cohort\", \"Cohort\", \"Coho… #> $ group_level    <chr> \"mgus_diagnosis\", \"mgus_diagnosis\", \"mgus_diagnosis\", \"… #> $ strata_name    <chr> \"Overall\", \"Overall\", \"Overall\", \"Overall\", \"Overall\", … #> $ strata_level   <chr> \"Overall\", \"Overall\", \"Overall\", \"Overall\", \"Overall\", … #> $ variable       <chr> \"Outcome\", \"Outcome\", \"Outcome\", \"Outcome\", \"Outcome\", … #> $ variable_level <chr> \"death_cohort\", \"death_cohort\", \"death_cohort\", \"death_… #> $ estimate_type  <chr> \"Survival probability\", \"Survival probability\", \"Surviv… #> $ variable_type  <chr> \"n_risk\", \"estimate\", \"estimate_95CI_lower\", \"estimate_… #> $ outcome        <chr> \"outcome\", \"outcome\", \"outcome\", \"outcome\", \"outcome\", … #> $ time           <dbl> 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4… #> $ analysis_type  <chr> \"Single event\", \"Single event\", \"Single event\", \"Single… #> $ estimate       <dbl> 1384.0000000, 1.0000000, 1.0000000, 1.0000000, 1384.000… plotSurvival(MGUS_death) MGUS_death %>% dplyr::filter(estimate_type == \"Survival summary\") %>%   tidyr::pivot_wider(names_from = \"variable_type\", values_from = \"estimate\") %>%   dplyr::mutate(     \"Restricted mean survival (se)\" = paste0(       round(restricted_mean),       \" (\", round(restricted_mean_std_error, 2), \")\"     ),     \"Median survival (95% CI)\" = paste0(median_survival,                                          \" (\", median_survival_95CI_lower,                                          \" to \", median_survival_95CI_higher, \")\")   ) %>%   dplyr::select(\"Restricted mean survival (se)\", \"Median survival (95% CI)\") #> # A tibble: 1 × 2 #>   `Restricted mean survival (se)` `Median survival (95% CI)` #>   <chr>                           <chr>                      #> 1 133 (4.34)                      98 (92 to 103)"},{"path":"https://darwin-eu.github.io/CohortSurvival/articles/a01_Single_event_of_interest.html","id":"with-stratification","dir":"Articles","previous_headings":"","what":"With stratification","title":"Single outcome event of interest","text":"estimate survival particular strata interest need features added target cohort table. defined, seen already number example characteristics added diagnosis cohort, can add stratifications like . can see well results strata, ’ll always also overall results returned.  also now summary statistics strata well overall.","code":"MGUS_death <- estimateSingleEventSurvival(cdm,   targetCohortTable = \"mgus_diagnosis\",   outcomeCohortTable = \"death_cohort\",   strata = list(c(\"age_group\"),                 c(\"sex\"),                 c(\"age_group\", \"sex\")) ) plotSurvival(MGUS_death,              facet = \"strata_name\",              colour = \"strata_level\") MGUS_death %>% dplyr::filter(estimate_type == \"Survival summary\") %>%   tidyr::pivot_wider(names_from = \"variable_type\", values_from = \"estimate\") %>%   dplyr::mutate(\"Restricted mean survival (se)\" = paste0(round(restricted_mean), \" (\", round(restricted_mean_std_error, 2), \")\"),                 \"Median survival (95% CI)\" = paste0(median_survival, \" (\", median_survival_95CI_lower, \" to \", median_survival_95CI_higher, \")\")                 ) %>%    dplyr::select(strata_name, strata_level,                 \"Restricted mean survival (se)\", \"Median survival (95% CI)\") #> # A tibble: 9 × 4 #>   strata_name       strata_level Restricted mean surviv…¹ Median survival (95%…² #>   <chr>             <chr>        <chr>                    <chr>                  #> 1 Overall           Overall      133 (4.34)               98 (92 to 103)         #> 2 age_group         <70          197 (8.35)               180 (158 to 206)       #> 3 age_group         >=70         86 (2.89)                71 (66 to 77)          #> 4 sex               F            143 (6.4)                108 (100 to 121)       #> 5 sex               M            125 (5.7)                88 (79 to 97)          #> 6 age_group and sex <70 and F    220 (12.97)              215 (179 to 260)       #> 7 age_group and sex <70 and M    183 (10.24)              158 (139 to 189)       #> 8 age_group and sex >=70 and F   96 (4.39)                82 (75 to 94)          #> 9 age_group and sex >=70 and M   80 (4.82)                61 (54 to 70)          #> # ℹ abbreviated names: ¹​`Restricted mean survival (se)`, #> #   ²​`Median survival (95% CI)`"},{"path":"https://darwin-eu.github.io/CohortSurvival/articles/a01_Single_event_of_interest.html","id":"summarising-participants","dir":"Articles","previous_headings":"","what":"Summarising participants","title":"Single outcome event of interest","text":"set returnParticipants TRUE also able access individuals contributed analysis.","code":"MGUS_death <- estimateSingleEventSurvival(cdm,   targetCohortTable = \"mgus_diagnosis\",   outcomeCohortTable = \"death_cohort\",   returnParticipants = TRUE ) survivalParticipants(MGUS_death) #> # Source:   table<dbplyr_052> [?? x 4] #> # Database: DuckDB 0.8.1 [unknown@Linux 5.15.0-1041-azure:R 4.3.1/:memory:] #>    cohort_definition_id subject_id cohort_start_date cohort_end_date #>                   <int>      <dbl> <date>            <date>          #>  1                    1          1 1981-01-01        1981-01-01      #>  2                    1          2 1968-01-01        1968-01-01      #>  3                    1          4 1977-01-01        1977-01-01      #>  4                    1          5 1973-01-01        1973-01-01      #>  5                    1          6 1990-01-01        1990-01-01      #>  6                    1         10 1981-01-01        1981-01-01      #>  7                    1         11 1972-01-01        1972-01-01      #>  8                    1         12 1983-01-01        1983-01-01      #>  9                    1         13 1968-01-01        1968-01-01      #> 10                    1         17 1975-01-01        1975-01-01      #> # ℹ more rows"},{"path":"https://darwin-eu.github.io/CohortSurvival/articles/a01_Single_event_of_interest.html","id":"disconnect-from-the-cdm-database-connection","dir":"Articles","previous_headings":"","what":"Disconnect from the cdm database connection","title":"Single outcome event of interest","text":"","code":"cdm_disconnect(cdm)"},{"path":"https://darwin-eu.github.io/CohortSurvival/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"First Last. Author, maintainer.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Last F (2023). CohortSurvival: Package (One Line, Title Case). R package version 0.0.0.9000, https://darwin-eu.github.io/CohortSurvival/.","code":"@Manual{,   title = {CohortSurvival: What the Package Does (One Line, Title Case)},   author = {First Last},   year = {2023},   note = {R package version 0.0.0.9000},   url = {https://darwin-eu.github.io/CohortSurvival/}, }"},{"path":"https://darwin-eu.github.io/CohortSurvival/index.html","id":"cohortsurvival-","dir":"","previous_headings":"","what":"What the Package Does (One Line, Title Case)","title":"What the Package Does (One Line, Title Case)","text":"CohortSurvival contains functions extracting summarising survival data using OMOP common data model.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"What the Package Does (One Line, Title Case)","text":"can install development version CohortSurvival like :","code":"install.packages(\"remotes\") remotes::install_github(\"darwin-eu/CohortSurvival\")"},{"path":[]},{"path":"https://darwin-eu.github.io/CohortSurvival/index.html","id":"create-a-reference-to-data-in-the-omop-cdm-format","dir":"","previous_headings":"Example usage","what":"Create a reference to data in the OMOP CDM format","title":"What the Package Does (One Line, Title Case)","text":"CohortSurvival package designed work data OMOP CDM format, first step create reference data using CDMConnector package. Creating connection Postgres database example look like:","code":"library(CDMConnector) library(CohortSurvival) library(dplyr) library(ggplot2) con <- DBI::dbConnect(RPostgres::Postgres(),   dbname = Sys.getenv(\"CDM5_POSTGRESQL_DBNAME\"),   host = Sys.getenv(\"CDM5_POSTGRESQL_HOST\"),   user = Sys.getenv(\"CDM5_POSTGRESQL_USER\"),   password = Sys.getenv(\"CDM5_POSTGRESQL_PASSWORD\") )  cdm <- CDMConnector::cdm_from_con(con,   cdm_schema = Sys.getenv(\"CDM5_POSTGRESQL_CDM_SCHEMA\"),   write_schema = Sys.getenv(\"CDM5_POSTGRESQL_RESULT_SCHEMA\") )"},{"path":"https://darwin-eu.github.io/CohortSurvival/index.html","id":"example-mgus","dir":"","previous_headings":"Example usage","what":"Example: MGUS","title":"What the Package Does (One Line, Title Case)","text":"example ´ll use cdm reference containing MGUS2 dataset survival package (transformed set OMOP CDM style cohort tables). mgus2 dataset contains survival data 1341 sequential patients monoclonal gammopathy undetermined significance (MGUS). information see ´?survival::mgus2´ example cdm reference three cohort tables interest: 1) MGUS diagnosis cohort MGUS progression cohort Death cohort","code":"cdm <- CohortSurvival::mockMGUS2cdm() cdm$mgus_diagnosis %>%   glimpse() #> Rows: ?? #> Columns: 10 #> Database: DuckDB 0.8.1 [eburn@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15… #> $ cohort_start_date    <date> 1981-01-01, 1968-01-01, 1980-01-01, 1977-01-01, … #> $ cohort_end_date      <date> 1981-01-01, 1968-01-01, 1980-01-01, 1977-01-01, … #> $ age                  <dbl> 88, 78, 94, 68, 90, 90, 89, 87, 86, 79, 86, 89, 8… #> $ sex                  <fct> F, F, M, M, F, M, F, F, F, F, M, F, M, F, M, F, F… #> $ hgb                  <dbl> 13.1, 11.5, 10.5, 15.2, 10.7, 12.9, 10.5, 12.3, 1… #> $ creat                <dbl> 1.30, 1.20, 1.50, 1.20, 0.80, 1.00, 0.90, 1.20, 0… #> $ mspike               <dbl> 0.5, 2.0, 2.6, 1.2, 1.0, 0.5, 1.3, 1.6, 2.4, 2.3,… #> $ age_group            <chr> \">=70\", \">=70\", \">=70\", \"<70\", \">=70\", \">=70\", \">… cdm$progression %>%   glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.8.1 [eburn@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <dbl> 56, 81, 83, 111, 124, 127, 147, 163, 165, 167, 18… #> $ cohort_start_date    <date> 1978-01-30, 1985-01-15, 1974-08-17, 1993-01-14, … #> $ cohort_end_date      <date> 1978-01-30, 1985-01-15, 1974-08-17, 1993-01-14, … cdm$death_cohort %>%   glimpse() #> Rows: ?? #> Columns: 4 #> Database: DuckDB 0.8.1 [eburn@Windows 10 x64:R 4.2.1/:memory:] #> $ cohort_definition_id <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1… #> $ subject_id           <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13, 14, 15, 1… #> $ cohort_start_date    <date> 1981-01-31, 1968-01-26, 1980-02-16, 1977-04-03, … #> $ cohort_end_date      <date> 1981-01-31, 1968-01-26, 1980-02-16, 1977-04-03, …"},{"path":"https://darwin-eu.github.io/CohortSurvival/index.html","id":"mgus-diagnosis-to-death","dir":"","previous_headings":"Example usage","what":"MGUS diagnosis to death","title":"What the Package Does (One Line, Title Case)","text":"can get survival estimates death following diagnosis like :","code":"MGUS_death <- estimateSingleEventSurvival(cdm,   targetCohortTable = \"mgus_diagnosis\",   targetCohortId = 1,   outcomeCohortTable = \"death_cohort\",   outcomeCohortId = 1 )  plotSurvival(MGUS_death)"},{"path":"https://darwin-eu.github.io/CohortSurvival/index.html","id":"stratified-results","dir":"","previous_headings":"Example usage","what":"Stratified results","title":"What the Package Does (One Line, Title Case)","text":"","code":"MGUS_death <- estimateSingleEventSurvival(cdm,   targetCohortTable = \"mgus_diagnosis\",   targetCohortId = 1,   outcomeCohortTable = \"death_cohort\",   outcomeCohortId = 1,    strata = list(c(\"age_group\"),                 c(\"sex\"),                 c(\"age_group\", \"sex\")) )  plotSurvival(MGUS_death,               colour = \"strata_level\",               facet= \"strata_name\")"},{"path":"https://darwin-eu.github.io/CohortSurvival/index.html","id":"summary-statisitics-on-survival","dir":"","previous_headings":"Example usage","what":"Summary statisitics on survival","title":"What the Package Does (One Line, Title Case)","text":"single event analyses, can extract restricted mean survival median survival","code":"MGUS_death %>% dplyr::filter(estimate_type == \"Survival summary\") %>%   tidyr::pivot_wider(names_from = \"variable_type\", values_from = \"estimate\") %>%   dplyr::mutate(\"Restricted mean survival (se)\" = paste0(round(restricted_mean), \" (\", round(restricted_mean_std_error, 2), \")\"),                 \"Median survival (95% CI)\" = paste0(median_survival, \" (\", median_survival_95CI_lower, \" to \", median_survival_95CI_higher, \")\")                 ) %>%    dplyr::select(strata_name, strata_level,                 \"Restricted mean survival (se)\", \"Median survival (95% CI)\") #> # A tibble: 9 × 4 #>   strata_name       strata_level Restricted mean surviv…¹ Median survival (95%…² #>   <chr>             <chr>        <chr>                    <chr>                  #> 1 Overall           Overall      133 (4.34)               98 (92 to 103)         #> 2 age_group         <70          197 (8.35)               180 (158 to 206)       #> 3 age_group         >=70         86 (2.89)                71 (66 to 77)          #> 4 sex               F            143 (6.4)                108 (100 to 121)       #> 5 sex               M            125 (5.7)                88 (79 to 97)          #> 6 age_group and sex <70 and F    220 (12.97)              215 (179 to 260)       #> 7 age_group and sex <70 and M    183 (10.24)              158 (139 to 189)       #> 8 age_group and sex >=70 and F   96 (4.39)                82 (75 to 94)          #> 9 age_group and sex >=70 and M   80 (4.82)                61 (54 to 70)          #> # ℹ abbreviated names: ¹​`Restricted mean survival (se)`, #> #   ²​`Median survival (95% CI)`"},{"path":"https://darwin-eu.github.io/CohortSurvival/index.html","id":"disconnect-from-the-cdm-database-connection","dir":"","previous_headings":"Example usage","what":"Disconnect from the cdm database connection","title":"What the Package Does (One Line, Title Case)","text":"","code":"cdm_disconnect(cdm)"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/CohortSurvival-package.html","id":null,"dir":"Reference","previous_headings":"","what":"CohortSurvival: What the Package Does (One Line, Title Case) — CohortSurvival-package","title":"CohortSurvival: What the Package Does (One Line, Title Case) — CohortSurvival-package","text":"package (one paragraph).","code":""},{"path":[]},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/CohortSurvival-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"CohortSurvival: What the Package Does (One Line, Title Case) — CohortSurvival-package","text":"Maintainer: First Last first.last@example.com (ORCID)","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/addCohortSurvival.html","id":null,"dir":"Reference","previous_headings":"","what":"Add survival information to a cohort table — addCohortSurvival","title":"Add survival information to a cohort table — addCohortSurvival","text":"Add survival information cohort table","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/addCohortSurvival.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Add survival information to a cohort table — addCohortSurvival","text":"","code":"addCohortSurvival(   x,   cdm,   outcomeCohortTable,   outcomeCohortId = 1,   outcomeDateVariable = \"cohort_start_date\",   censorOnCohortExit = FALSE,   censorOnDate = NULL,   followUpDays = Inf )"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/addCohortSurvival.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Add survival information to a cohort table — addCohortSurvival","text":"x cohort table add survival information cdm CDM reference outcomeCohortTable outcome cohort table interest. outcomeCohortId ID event cohorts include. one outcome (one ID) can considered. outcomeDateVariable Variable containing date outcome event censorOnCohortExit TRUE, individual's follow censored cohort exit censorOnDate NULL, individual's follow censored given date followUpDays Number days follow individuals (lower bound 1, upper bound Inf)","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/addCohortSurvival.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Add survival information to a cohort table — addCohortSurvival","text":"Two additional columns added x. \"time\" column contain number days censoring. \"status\" column indicate whether patient event (value: 1), event (value: 0)","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/addCohortSurvival.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Add survival information to a cohort table — addCohortSurvival","text":"","code":"cohort <- dplyr::tibble( cohort_definition_id = c(1,1,1), subject_id = c(1,2,3), cohort_start_date = c(as.Date(\"2020-01-01\"),                       as.Date(\"2020-01-02\"),                       as.Date(\"2020-01-01\")), cohort_end_date = c(as.Date(\"2020-04-01\"),                     as.Date(\"2020-08-02\"),                     as.Date(\"2020-03-01\")) ) cdm <- PatientProfiles::mockPatientProfiles(cohort1 = cohort) cdm$cohort1 <- cdm$cohort1 %>%   addCohortSurvival(     cdm = cdm,     outcomeCohortTable = \"cohort2\",     outcomeCohortId = 1   )"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/benchmarkCohortSurvival.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate performance of estimateSurvival function for benchmarking — benchmarkCohortSurvival","title":"Estimate performance of estimateSurvival function for benchmarking — benchmarkCohortSurvival","text":"Estimate performance estimateSurvival function benchmarking","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/benchmarkCohortSurvival.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate performance of estimateSurvival function for benchmarking — benchmarkCohortSurvival","text":"","code":"benchmarkCohortSurvival(   cdm,   targetSize,   outcomeSize,   outcomeDateVariable = \"cohort_start_date\",   competingOutcomeSize = NULL,   competingOutcomeDateVariable = \"cohort_start_date\",   censorOnCohortExit = FALSE,   censorOnDate = NULL,   followUpDays = Inf,   strata = NULL,   timeGap = c(1, 7, 30, 365),   times = NULL,   minCellCount = 5,   returnParticipants = FALSE )"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/benchmarkCohortSurvival.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate performance of estimateSurvival function for benchmarking — benchmarkCohortSurvival","text":"cdm CDM reference targetSize number people target cohort table outcomeSize number people outcome cohort table outcomeDateVariable Variable containing date outcome event competingOutcomeSize number people competing outcome cohort table competingOutcomeDateVariable Variable containing date competing event censorOnCohortExit TRUE, individual's follow censored cohort exit censorOnDate NULL, individual's follow censored given date followUpDays Number days follow individuals (lower bound 1, upper bound Inf) strata strata timeGap Days time points report survival estimates. First day day zero risk estimates provided times end follow-, gap days equivalent timeGap. times vector time points give survival estimates, NULL estimates times calculated minCellCount minimum number events reported, results obscured. 0, results reported. returnParticipants Either TRUE FALSE. TRUE, references participants analysis returned allowing analysis.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/benchmarkCohortSurvival.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate performance of estimateSurvival function for benchmarking — benchmarkCohortSurvival","text":"tibble performance estimateSurvival function information, according selected input parameters","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/benchmarkCohortSurvival.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate performance of estimateSurvival function for benchmarking — benchmarkCohortSurvival","text":"","code":"cdm <- mockMGUS2cdm() cdm$condition_occurrence <- cdm$death_cohort %>% dplyr::rename(\"condition_start_date\" = \"cohort_start_date\",              \"condition_end_date\" = \"cohort_end_date\") surv_timings <- benchmarkCohortSurvival( cdm, targetSize = 100, outcomeSize = 20) #> → cohort 1 has been changed to cohort_1 #> → some provided names were not in snake_case #> → names have been changed to lower case #> → special symbols in names have been changed to '_' #> → cohort 1 has been changed to cohort_1 #> → some provided names were not in snake_case #> → names have been changed to lower case #> → special symbols in names have been changed to '_' #> Getting overall estimates"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/estimateSingleEventSurvival.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate survival for a given event of interest using cohorts in the OMOP Common Data Model — estimateSingleEventSurvival","title":"Estimate survival for a given event of interest using cohorts in the OMOP Common Data Model — estimateSingleEventSurvival","text":"Estimate survival given event interest using cohorts OMOP Common Data Model","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/estimateSingleEventSurvival.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate survival for a given event of interest using cohorts in the OMOP Common Data Model — estimateSingleEventSurvival","text":"","code":"estimateSingleEventSurvival(   cdm,   targetCohortTable,   targetCohortId = 1,   outcomeCohortTable,   outcomeCohortId = 1,   outcomeDateVariable = \"cohort_start_date\",   censorOnCohortExit = FALSE,   censorOnDate = NULL,   followUpDays = Inf,   strata = NULL,   timeGap = c(1, 7, 30, 365),   times = NULL,   minCellCount = 5,   returnParticipants = FALSE )"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/estimateSingleEventSurvival.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate survival for a given event of interest using cohorts in the OMOP Common Data Model — estimateSingleEventSurvival","text":"cdm CDM reference targetCohortTable targetCohortTable targetCohortId targetCohortId outcomeCohortTable outcome cohort table interest. outcomeCohortId ID event cohorts include. one outcome (one ID) can considered. outcomeDateVariable Variable containing date outcome event censorOnCohortExit TRUE, individual's follow censored cohort exit censorOnDate NULL, individual's follow censored given date followUpDays Number days follow individuals (lower bound 1, upper bound Inf) strata strata timeGap Days time points report survival estimates. First day day zero risk estimates provided times end follow-, gap days equivalent timeGap. times vector time points give survival estimates, NULL estimates times calculated minCellCount minimum number events reported, results obscured. 0, results reported. returnParticipants Either TRUE FALSE. TRUE, references participants analysis returned allowing analysis.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/estimateSingleEventSurvival.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate survival for a given event of interest using cohorts in the OMOP Common Data Model — estimateSingleEventSurvival","text":"tibble survival information desired cohort, including: time, people risk, survival probability, cumulative incidence, 95 CIs, strata outcome. tibble number events outputted attribute output","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/estimateSingleEventSurvival.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate survival for a given event of interest using cohorts in the OMOP Common Data Model — estimateSingleEventSurvival","text":"","code":"cdm <- mockMGUS2cdm() surv <- estimateSingleEventSurvival(cdm,                        targetCohortTable = \"mgus_diagnosis\",                        targetCohortId = 1,                        outcomeCohortTable = \"death_cohort\",                        outcomeCohortId = 1,                        timeGap = 7 ) #> Getting overall estimates"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/generateDeathCohortSet.html","id":null,"dir":"Reference","previous_headings":"","what":"To create a death cohort — generateDeathCohortSet","title":"To create a death cohort — generateDeathCohortSet","text":"create death cohort","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/generateDeathCohortSet.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"To create a death cohort — generateDeathCohortSet","text":"","code":"generateDeathCohortSet(   cdm,   deathInObservation = FALSE,   name = \"death_cohort\",   cohortTable = NULL,   cohortId = NULL )"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/generateDeathCohortSet.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"To create a death cohort — generateDeathCohortSet","text":"cdm CDM reference deathInObservation TRUE, restricts deaths included observed ongoing observation period. name name created death cohort table cohortTable name cohort table create death cohort cohortId name cohort table create death cohort ","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/generateDeathCohortSet.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"To create a death cohort — generateDeathCohortSet","text":"cohort table death cohort cdm","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/mockMGUS2cdm.html","id":null,"dir":"Reference","previous_headings":"","what":"Create mock CDM reference with survival::mgus2 dataset — mockMGUS2cdm","title":"Create mock CDM reference with survival::mgus2 dataset — mockMGUS2cdm","text":"Create mock CDM reference survival::mgus2 dataset","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/mockMGUS2cdm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Create mock CDM reference with survival::mgus2 dataset — mockMGUS2cdm","text":"","code":"mockMGUS2cdm()"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/mockMGUS2cdm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create mock CDM reference with survival::mgus2 dataset — mockMGUS2cdm","text":"CDM reference containing data survival::mgus2 dataset","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/plotCumulativeIncidence.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot cumulative incidence — plotCumulativeIncidence","title":"Plot cumulative incidence — plotCumulativeIncidence","text":"Plot cumulative incidence","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/plotCumulativeIncidence.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot cumulative incidence — plotCumulativeIncidence","text":"","code":"plotCumulativeIncidence(   result,   x = \"time\",   ylim = c(0, NA),   ribbon = TRUE,   facet = NULL,   colour = NULL,   colour_name = NULL )"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/plotCumulativeIncidence.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot cumulative incidence — plotCumulativeIncidence","text":"result Survival results x Variable plot x axis ylim Limits Y axis ribbon TRUE, plot join points using ribbon facet Variables use facets colour Variables use colours colour_name Colour legend name","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/plotSurvival.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot survival results — plotSurvival","title":"Plot survival results — plotSurvival","text":"Plot survival results","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/plotSurvival.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot survival results — plotSurvival","text":"","code":"plotSurvival(   result,   x = \"time\",   ylim = c(0, NA),   ribbon = TRUE,   facet = NULL,   colour = NULL,   colour_name = NULL )"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/plotSurvival.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot survival results — plotSurvival","text":"result Survival results x Variable plot x axis ylim Limits Y axis ribbon TRUE, plot join points using ribbon facet Variables use facets colour Variables use colours colour_name Colour legend name","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/plotSurvival.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot survival results — plotSurvival","text":"ggplot survival results plotted","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/reexports.html","id":null,"dir":"Reference","previous_headings":"","what":"Objects exported from other packages — reexports","title":"Objects exported from other packages — reexports","text":"objects imported packages. Follow links see documentation. PatientProfiles summariseCharacteristics","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/survivalParticipants.html","id":null,"dir":"Reference","previous_headings":"","what":"Participants contributing to a survival analysis — survivalParticipants","title":"Participants contributing to a survival analysis — survivalParticipants","text":"Participants contributing survival analysis","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/survivalParticipants.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Participants contributing to a survival analysis — survivalParticipants","text":"","code":"survivalParticipants(result)"},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/survivalParticipants.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Participants contributing to a survival analysis — survivalParticipants","text":"result Result object","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/survivalParticipants.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Participants contributing to a survival analysis — survivalParticipants","text":"References study participants contributing given analysis","code":""},{"path":"https://darwin-eu.github.io/CohortSurvival/reference/tidyeval.html","id":null,"dir":"Reference","previous_headings":"","what":"Tidy eval helpers — tidyeval","title":"Tidy eval helpers — tidyeval","text":"page lists tidy eval tools reexported package rlang. learn using tidy eval scripts packages high level, see dplyr programming vignette ggplot2 packages vignette. Metaprogramming section Advanced R may also useful deeper dive. tidy eval operators {{, !!, !!! syntactic constructs specially interpreted tidy eval functions. mostly need {{, !! !!! advanced operators use simple cases. curly-curly operator {{ allows tunnel data-variables passed function arguments inside tidy eval functions. {{ designed individual arguments. pass multiple arguments contained dots, use ... normal way.   enquo() enquos() delay execution one several function arguments. former returns single expression, latter returns list expressions. defused, expressions longer evaluate . must injected back evaluation context !! (single expression) !!! (list expressions).   simple case, code equivalent usage {{ ... . Defusing enquo() enquos() needed complex cases, instance need inspect modify expressions way. .data pronoun object represents current slice data. variable name string, use .data pronoun subset variable [[.   Another tidy eval operator :=. makes possible use glue curly-curly syntax LHS =. technical reasons, R language support complex expressions left =, use := workaround.   Many tidy eval functions like dplyr::mutate() dplyr::summarise() give automatic name unnamed inputs. need create sort automatic names , use as_label(). instance, glue-tunnelling syntax can reproduced manually :   Expressions defused enquo() (tunnelled {{) need simple column names, can arbitrarily complex. as_label() handles cases gracefully. code assumes simple column name, use as_name() instead. safer throws error input name expected.","code":"my_function <- function(data, var, ...) {   data %>%     group_by(...) %>%     summarise(mean = mean({{ var }})) } my_function <- function(data, var, ...) {   # Defuse   var <- enquo(var)   dots <- enquos(...)    # Inject   data %>%     group_by(!!!dots) %>%     summarise(mean = mean(!!var)) } my_var <- \"disp\" mtcars %>% summarise(mean = mean(.data[[my_var]])) my_function <- function(data, var, suffix = \"foo\") {   # Use `{{` to tunnel function arguments and the usual glue   # operator `{` to interpolate plain strings.   data %>%     summarise(\"{{ var }}_mean_{suffix}\" := mean({{ var }})) } my_function <- function(data, var, suffix = \"foo\") {   var <- enquo(var)   prefix <- as_label(var)   data %>%     summarise(\"{prefix}_mean_{suffix}\" := mean(!!var)) }"}]
